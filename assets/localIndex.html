<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h1>Tach</h1>


<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>
<script>
    var token = undefined;
    var user = undefined;
    var parts = undefined;
    var socket = io('http://localhost:3000/');

    socket.on('news', function (data) {

        socket.emit('registerOD', {
            identifier: "Schlese",
            email: 'schlese@fhstp.ac.at',
            password: 'pwd',
            isGuest: false,
            deviceAddress: 'deviceAddress',
            deviceOS: 'deviceOS',
            deviceVersion: 'deviceVersion',
            deviceModel: 'deviceModel',
            ipAddress: 'not set',
            language: 1
        });

        socket.on('registerODResult', function (result)
        {
            user = result.data.user;
            socket.emit('getCoaParts');
        });

        socket.on('getCoaPartsResult', function (result)
        {
            parts = result.data;
            console.log("------------ Get Coa Parts ------------");
            console.log(parts);

            socket.emit('unlockCoaPart', {userId: user.id, coaId: parts[0].id});
        });

        socket.on('unlockCoaPartResult', function (result)
        {
            var userParts = result.data;
            console.log("------------ Unlock Coa Part ------------");
            console.log(userParts);

            socket.emit('getUserCoaParts', {userId: user.id, coaId: parts[0].id});
        });

        socket.on('getUserCoaPartsResult', function(result)
        {
           var userParts = result.data;
           console.log("------------ Get User Coa Parts ------------");
           console.log(userParts);
        });

    });
</script>
</body>
</html>